<!DOCTYPE html>
<html>
<head>
  <title>ML Prediction Playground</title>
  <link rel="stylesheet" href="../assets/styles.css">
</head>
<body>

<header>
  <h1>Upload Your Data & Run Predictions</h1>
  <nav>
    <a href="../index.html">Home</a>
    <a href="ai-chat.html">AI Chat</a>
  </nav>
</header>

<div class="container">

  <div class="section">
    <h2>1. Upload Your Excel/CSV File</h2>
    <input type="file" id="fileInput" accept=".xlsx,.xls,.csv">
  </div>

  <div class="section">
    <h2>2. Choose a Machine Learning Model</h2>
    <select id="modelSelect">
      <option value="linear_regression">Linear Regression</option>
      <option value="random_forest_regressor">Random Forest Regressor</option>
      <option value="xgboost_regressor">XGBoost Regressor</option>
      <option value="logistic_regression">Logistic Regression</option>
      <option value="random_forest_classifier">Random Forest Classifier</option>
      <option value="svm">Support Vector Machine</option>
      <option value="naive_bayes">Naive Bayes</option>
      <option value="kmeans">K-Means Clustering</option>
      <option value="dbscan">DBSCAN Clustering</option>
      <option value="automl">AutoML (Best Model)</option>
    </select>
  </div>

  <div class="section">
    <h2>3. Run Prediction</h2>
    <button onclick="uploadAndPredict()">Run Model</button>
  </div>

  <div class="section">
    <h2>Results</h2>
    <pre id="output"></pre>
  </div>

</div>

<script>
async function uploadAndPredict() {
  const file = document.getElementById("fileInput").files[0];
  const model = document.getElementById("modelSelect").value;

  if (!file) {
    alert("Please upload a file first");
    return;
  }

  const formData = new FormData();
  formData.append("file", file);
  formData.append("model", model);

  const response = await fetch("https://ml-backend-yury.onrender.com/predict", {
    method: "POST",
    body: formData
  });

  const result = await response.json();
  document.getElementById("output").textContent = JSON.stringify(result, null, 2);
}
</script>

</body>
</html>
